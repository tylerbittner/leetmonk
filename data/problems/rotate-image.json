{
  "id": "rotate-image",
  "title": "Rotate Image",
  "difficulty": "medium",
  "tags": [
    "matrix",
    "math"
  ],
  "description": "## Rotate Image\n\nYou are building a satellite image processor. When a satellite photo is received at the wrong orientation, you need to rotate it 90 degrees clockwise. Memory is limited, so the rotation must be done **in-place** without allocating a second matrix.\n\nGiven an `n x n` 2D matrix `matrix` representing an image, rotate the image **90 degrees clockwise in-place** and return the modified matrix.\n\n**Constraints:**\n- `n == matrix.length == matrix[i].length`\n- `1 <= n <= 20`\n- `-1000 <= matrix[i][j] <= 1000`",
  "examples": [
    {
      "input": "matrix = [[1,2,3],[4,5,6],[7,8,9]]",
      "output": "[[7,4,1],[8,5,2],[9,6,3]]",
      "explanation": "Rotate 90\u00b0 clockwise: top row becomes right column, etc."
    },
    {
      "input": "matrix = [[5,1,9,11],[2,4,8,10],[13,3,6,7],[15,14,12,16]]",
      "output": "[[15,13,2,5],[14,3,4,1],[12,6,8,9],[16,7,10,11]]",
      "explanation": "4x4 matrix rotated 90\u00b0 clockwise."
    }
  ],
  "exampleCases": [
    {
      "input": {
        "matrix": [
          [
            1,
            2,
            3
          ],
          [
            4,
            5,
            6
          ],
          [
            7,
            8,
            9
          ]
        ]
      },
      "expected": [
        [
          7,
          4,
          1
        ],
        [
          8,
          5,
          2
        ],
        [
          9,
          6,
          3
        ]
      ],
      "explanation": "3x3 rotation"
    },
    {
      "input": {
        "matrix": [
          [
            5,
            1,
            9,
            11
          ],
          [
            2,
            4,
            8,
            10
          ],
          [
            13,
            3,
            6,
            7
          ],
          [
            15,
            14,
            12,
            16
          ]
        ]
      },
      "expected": [
        [
          15,
          13,
          2,
          5
        ],
        [
          14,
          3,
          4,
          1
        ],
        [
          12,
          6,
          8,
          9
        ],
        [
          16,
          7,
          10,
          11
        ]
      ],
      "explanation": "4x4 rotation"
    },
    {
      "input": {
        "matrix": [
          [
            1
          ]
        ]
      },
      "expected": [
        [
          1
        ]
      ],
      "explanation": "1x1 matrix"
    },
    {
      "input": {
        "matrix": [
          [
            1,
            2
          ],
          [
            3,
            4
          ]
        ]
      },
      "expected": [
        [
          3,
          1
        ],
        [
          4,
          2
        ]
      ],
      "explanation": "2x2 rotation"
    }
  ],
  "hiddenCases": [
    {
      "input": {
        "matrix": [
          [
            1,
            2,
            3,
            4,
            5
          ],
          [
            6,
            7,
            8,
            9,
            10
          ],
          [
            11,
            12,
            13,
            14,
            15
          ],
          [
            16,
            17,
            18,
            19,
            20
          ],
          [
            21,
            22,
            23,
            24,
            25
          ]
        ]
      },
      "expected": [
        [
          21,
          16,
          11,
          6,
          1
        ],
        [
          22,
          17,
          12,
          7,
          2
        ],
        [
          23,
          18,
          13,
          8,
          3
        ],
        [
          24,
          19,
          14,
          9,
          4
        ],
        [
          25,
          20,
          15,
          10,
          5
        ]
      ],
      "explanation": "5x5 rotation"
    },
    {
      "input": {
        "matrix": [
          [
            0,
            0
          ],
          [
            0,
            0
          ]
        ]
      },
      "expected": [
        [
          0,
          0
        ],
        [
          0,
          0
        ]
      ],
      "explanation": "All zeros"
    },
    {
      "input": {
        "matrix": [
          [
            -1,
            -2
          ],
          [
            -3,
            -4
          ]
        ]
      },
      "expected": [
        [
          -3,
          -1
        ],
        [
          -4,
          -2
        ]
      ],
      "explanation": "Negative values"
    },
    {
      "input": {
        "matrix": [
          [
            1000,
            -1000
          ],
          [
            -1000,
            1000
          ]
        ]
      },
      "expected": [
        [
          -1000,
          1000
        ],
        [
          1000,
          -1000
        ]
      ],
      "explanation": "Large values"
    },
    {
      "input": {
        "matrix": [
          [
            1,
            2,
            3
          ],
          [
            4,
            5,
            6
          ],
          [
            7,
            8,
            9
          ]
        ]
      },
      "expected": [
        [
          7,
          4,
          1
        ],
        [
          8,
          5,
          2
        ],
        [
          9,
          6,
          3
        ]
      ],
      "explanation": "3x3 again"
    },
    {
      "input": {
        "matrix": [
          [
            3,
            3
          ],
          [
            3,
            3
          ]
        ]
      },
      "expected": [
        [
          3,
          3
        ],
        [
          3,
          3
        ]
      ],
      "explanation": "All same value"
    },
    {
      "input": {
        "matrix": [
          [
            1,
            0,
            0
          ],
          [
            0,
            1,
            0
          ],
          [
            0,
            0,
            1
          ]
        ]
      },
      "expected": [
        [
          0,
          0,
          1
        ],
        [
          0,
          1,
          0
        ],
        [
          1,
          0,
          0
        ]
      ],
      "explanation": "Identity matrix"
    },
    {
      "input": {
        "matrix": [
          [
            1,
            2,
            3,
            4
          ],
          [
            5,
            6,
            7,
            8
          ],
          [
            9,
            10,
            11,
            12
          ],
          [
            13,
            14,
            15,
            16
          ]
        ]
      },
      "expected": [
        [
          13,
          9,
          5,
          1
        ],
        [
          14,
          10,
          6,
          2
        ],
        [
          15,
          11,
          7,
          3
        ],
        [
          16,
          12,
          8,
          4
        ]
      ],
      "explanation": "4x4 rotation"
    },
    {
      "input": {
        "matrix": [
          [
            2,
            29,
            20,
            26
          ],
          [
            19,
            24,
            5,
            30
          ],
          [
            8,
            14,
            16,
            22
          ],
          [
            17,
            2,
            18,
            6
          ]
        ]
      },
      "expected": [
        [
          17,
          8,
          19,
          2
        ],
        [
          2,
          14,
          24,
          29
        ],
        [
          18,
          16,
          5,
          20
        ],
        [
          6,
          22,
          30,
          26
        ]
      ],
      "explanation": "Unsorted 4x4"
    },
    {
      "input": {
        "matrix": [
          [
            5
          ]
        ]
      },
      "expected": [
        [
          5
        ]
      ],
      "explanation": "Another 1x1"
    },
    {
      "input": {
        "matrix": [
          [
            1,
            2,
            3
          ],
          [
            4,
            5,
            6
          ],
          [
            7,
            8,
            9
          ]
        ]
      },
      "expected": [
        [
          7,
          4,
          1
        ],
        [
          8,
          5,
          2
        ],
        [
          9,
          6,
          3
        ]
      ],
      "explanation": "Verify in-place behavior"
    }
  ],
  "starterCode": {
    "python": "from typing import List\n\ndef rotate_image(matrix: List[List[int]]) -> List[List[int]]:\n    pass"
  },
  "functionName": "rotate_image",
  "solutions": [
    {
      "label": "Transpose + Reverse Rows \u2014 O(n\u00b2)",
      "approach": "obvious",
      "language": "python",
      "code": "from typing import List\n\ndef rotate_image(matrix: List[List[int]]) -> List[List[int]]:\n    n = len(matrix)\n    # Transpose: swap matrix[i][j] and matrix[j][i]\n    for i in range(n):\n        for j in range(i + 1, n):\n            matrix[i][j], matrix[j][i] = matrix[j][i], matrix[i][j]\n    # Reverse each row\n    for row in matrix:\n        row.reverse()\n    return matrix",
      "timeComplexity": "O(n\u00b2)",
      "spaceComplexity": "O(1)",
      "explanation": "A 90\u00b0 clockwise rotation is equivalent to two steps: (1) transpose the matrix (swap matrix[i][j] with matrix[j][i]), then (2) reverse each row. Both operations are in-place and together achieve the rotation."
    },
    {
      "label": "Layer-by-Layer \u2014 O(n\u00b2)",
      "approach": "optimal",
      "language": "python",
      "code": "from typing import List\n\ndef rotate_image(matrix: List[List[int]]) -> List[List[int]]:\n    n = len(matrix)\n    for layer in range(n // 2):\n        first = layer\n        last = n - 1 - layer\n        for i in range(first, last):\n            offset = i - first\n            top = matrix[first][i]\n            # left -> top\n            matrix[first][i] = matrix[last - offset][first]\n            # bottom -> left\n            matrix[last - offset][first] = matrix[last][last - offset]\n            # right -> bottom\n            matrix[last][last - offset] = matrix[i][last]\n            # top -> right\n            matrix[i][last] = top\n    return matrix",
      "timeComplexity": "O(n\u00b2)",
      "spaceComplexity": "O(1)",
      "explanation": "Process the matrix layer by layer from outside in. For each element in a layer, perform a 4-way cyclic swap: top->right, right->bottom, bottom->left, left->top. Only a single temp variable is needed per swap cycle."
    }
  ],
  "hints": [
    "A clockwise rotation equals a transpose followed by reversing each row.",
    "Alternatively, process the matrix layer by layer (outer ring, then next inner ring, etc.) doing a 4-way swap."
  ],
  "lcEquivalent": "48. Rotate Image"
}