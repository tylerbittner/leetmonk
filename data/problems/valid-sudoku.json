{
  "id": "valid-sudoku",
  "title": "Valid Sudoku",
  "difficulty": "medium",
  "tags": [
    "matrix",
    "hash-set"
  ],
  "description": "## Valid Sudoku\n\nYou are building a puzzle validation module for a digital game platform. Players submit partially completed Sudoku boards and your system must verify whether the current state is valid before allowing further play.\n\nDetermine if a `9 x 9` Sudoku board is **valid**. Only the filled cells need to be validated according to the following rules:\n\n1. Each **row** must contain the digits 1-9 with no repetition.\n2. Each **column** must contain the digits 1-9 with no repetition.\n3. Each of the nine **3 x 3 sub-boxes** must contain the digits 1-9 with no repetition.\n\nEmpty cells are represented by `'.'`. Note: a valid board does not need to be solvable.\n\n**Constraints:**\n- `board.length == 9`\n- `board[i].length == 9`\n- `board[i][j]` is a digit 1-9 or `'.'`",
  "examples": [
    {
      "input": "board = [[\"5\",\"3\",\".\",\".\",\"7\",\".\",\".\",\".\",\".\"],[\"6\",\".\",\".\",\"1\",\"9\",\"5\",\".\",\".\",\".\"],[\".\",\"9\",\"8\",\".\",\".\",\".\",\".\",\"6\",\".\"],[\"8\",\".\",\".\",\".\",\"6\",\".\",\".\",\".\",\"3\"],[\"4\",\".\",\".\",\"8\",\".\",\"3\",\".\",\".\",\"1\"],[\"7\",\".\",\".\",\".\",\"2\",\".\",\".\",\".\",\"6\"],[\".\",\"6\",\".\",\".\",\".\",\".\",\"2\",\"8\",\".\"],[\".\",\".\",\".\",\"4\",\"1\",\"9\",\".\",\".\",\"5\"],[\".\",\".\",\".\",\".\",\"8\",\".\",\".\",\"7\",\"9\"]]",
      "output": "true",
      "explanation": "The board is valid \u2014 no row, column, or box has a repeated digit."
    }
  ],
  "exampleCases": [
    {
      "input": {
        "board": [
          [
            "5",
            "3",
            ".",
            ".",
            "7",
            ".",
            ".",
            ".",
            "."
          ],
          [
            "6",
            ".",
            ".",
            "1",
            "9",
            "5",
            ".",
            ".",
            "."
          ],
          [
            ".",
            "9",
            "8",
            ".",
            ".",
            ".",
            ".",
            "6",
            "."
          ],
          [
            "8",
            ".",
            ".",
            ".",
            "6",
            ".",
            ".",
            ".",
            "3"
          ],
          [
            "4",
            ".",
            ".",
            "8",
            ".",
            "3",
            ".",
            ".",
            "1"
          ],
          [
            "7",
            ".",
            ".",
            ".",
            "2",
            ".",
            ".",
            ".",
            "6"
          ],
          [
            ".",
            "6",
            ".",
            ".",
            ".",
            ".",
            "2",
            "8",
            "."
          ],
          [
            ".",
            ".",
            ".",
            "4",
            "1",
            "9",
            ".",
            ".",
            "5"
          ],
          [
            ".",
            ".",
            ".",
            ".",
            "8",
            ".",
            ".",
            "7",
            "9"
          ]
        ]
      },
      "expected": true,
      "explanation": "Valid partially filled board"
    },
    {
      "input": {
        "board": [
          [
            "8",
            "3",
            ".",
            ".",
            "7",
            ".",
            ".",
            ".",
            "."
          ],
          [
            "6",
            ".",
            ".",
            "1",
            "9",
            "5",
            ".",
            ".",
            "."
          ],
          [
            ".",
            "9",
            "8",
            ".",
            ".",
            ".",
            ".",
            "6",
            "."
          ],
          [
            "8",
            ".",
            ".",
            ".",
            "6",
            ".",
            ".",
            ".",
            "3"
          ],
          [
            "4",
            ".",
            ".",
            "8",
            ".",
            "3",
            ".",
            ".",
            "1"
          ],
          [
            "7",
            ".",
            ".",
            ".",
            "2",
            ".",
            ".",
            ".",
            "6"
          ],
          [
            ".",
            "6",
            ".",
            ".",
            ".",
            ".",
            "2",
            "8",
            "."
          ],
          [
            ".",
            ".",
            ".",
            "4",
            "1",
            "9",
            ".",
            ".",
            "5"
          ],
          [
            ".",
            ".",
            ".",
            ".",
            "8",
            ".",
            ".",
            "7",
            "9"
          ]
        ]
      },
      "expected": false,
      "explanation": "Column 0 has two 8s"
    },
    {
      "input": {
        "board": [
          [
            ".",
            ".",
            ".",
            ".",
            "5",
            ".",
            ".",
            "1",
            "."
          ],
          [
            ".",
            "4",
            ".",
            "3",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            "3",
            ".",
            ".",
            "1"
          ],
          [
            "8",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "2",
            "."
          ],
          [
            ".",
            ".",
            "2",
            ".",
            "7",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            "6",
            ".",
            "3",
            ".",
            ".",
            "7",
            "."
          ],
          [
            ".",
            ".",
            ".",
            "3",
            "2",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "6"
          ],
          [
            ".",
            ".",
            ".",
            "5",
            "1",
            "2",
            ".",
            ".",
            "."
          ]
        ]
      },
      "expected": false,
      "explanation": "Invalid board configuration"
    },
    {
      "input": {
        "board": [
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ]
        ]
      },
      "expected": true,
      "explanation": "Empty board is valid"
    }
  ],
  "hiddenCases": [
    {
      "input": {
        "board": [
          [
            "1",
            "2",
            "3",
            "4",
            "5",
            "6",
            "7",
            "8",
            "9"
          ],
          [
            "4",
            "5",
            "6",
            "7",
            "8",
            "9",
            "1",
            "2",
            "3"
          ],
          [
            "7",
            "8",
            "9",
            "1",
            "2",
            "3",
            "4",
            "5",
            "6"
          ],
          [
            "2",
            "3",
            "4",
            "5",
            "6",
            "7",
            "8",
            "9",
            "1"
          ],
          [
            "5",
            "6",
            "7",
            "8",
            "9",
            "1",
            "2",
            "3",
            "4"
          ],
          [
            "8",
            "9",
            "1",
            "2",
            "3",
            "4",
            "5",
            "6",
            "7"
          ],
          [
            "3",
            "4",
            "5",
            "6",
            "7",
            "8",
            "9",
            "1",
            "2"
          ],
          [
            "6",
            "7",
            "8",
            "9",
            "1",
            "2",
            "3",
            "4",
            "5"
          ],
          [
            "9",
            "1",
            "2",
            "3",
            "4",
            "5",
            "6",
            "7",
            "8"
          ]
        ]
      },
      "expected": true,
      "explanation": "Fully valid solved board"
    },
    {
      "input": {
        "board": [
          [
            "1",
            "1",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ]
        ]
      },
      "expected": false,
      "explanation": "Row 0 has duplicate 1"
    },
    {
      "input": {
        "board": [
          [
            "1",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            "1",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ]
        ]
      },
      "expected": false,
      "explanation": "Column 0 has duplicate 1"
    },
    {
      "input": {
        "board": [
          [
            "1",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            "1",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ]
        ]
      },
      "expected": false,
      "explanation": "Top-left 3x3 box has duplicate 1"
    },
    {
      "input": {
        "board": [
          [
            "9",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ]
        ]
      },
      "expected": true,
      "explanation": "Only one cell filled"
    },
    {
      "input": {
        "board": [
          [
            "2",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ]
        ]
      },
      "expected": true,
      "explanation": "Single 2 in corner"
    },
    {
      "input": {
        "board": [
          [
            "5",
            "3",
            ".",
            ".",
            "7",
            ".",
            ".",
            ".",
            "."
          ],
          [
            "6",
            ".",
            ".",
            "1",
            "9",
            "5",
            ".",
            ".",
            "."
          ],
          [
            ".",
            "9",
            "8",
            ".",
            ".",
            ".",
            ".",
            "6",
            "."
          ],
          [
            "8",
            ".",
            ".",
            ".",
            "6",
            ".",
            ".",
            ".",
            "3"
          ],
          [
            "4",
            ".",
            ".",
            "8",
            ".",
            "3",
            ".",
            ".",
            "1"
          ],
          [
            "7",
            ".",
            ".",
            ".",
            "2",
            ".",
            ".",
            ".",
            "6"
          ],
          [
            ".",
            "6",
            ".",
            ".",
            ".",
            ".",
            "2",
            "8",
            "."
          ],
          [
            ".",
            ".",
            ".",
            "4",
            "1",
            "9",
            ".",
            ".",
            "5"
          ],
          [
            "9",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "7",
            "9"
          ]
        ]
      },
      "expected": false,
      "explanation": "Row 8 has duplicate 9"
    },
    {
      "input": {
        "board": [
          [
            ".",
            ".",
            "9",
            "7",
            "4",
            "8",
            ".",
            ".",
            "."
          ],
          [
            "7",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            "2",
            ".",
            "1",
            ".",
            "9",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "2",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            "8",
            ".",
            ".",
            ".",
            "4"
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            "3",
            "6",
            ".",
            "7",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ]
        ]
      },
      "expected": true,
      "explanation": "Sparse valid board"
    },
    {
      "input": {
        "board": [
          [
            "3",
            ".",
            ".",
            ".",
            ".",
            "5",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            "3",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ]
        ]
      },
      "expected": false,
      "explanation": "Column 0 has duplicate 3"
    },
    {
      "input": {
        "board": [
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            "1",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ],
          [
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            ".",
            "."
          ]
        ]
      },
      "expected": true,
      "explanation": "Single cell filled in center"
    }
  ],
  "starterCode": {
    "python": "from typing import List\n\ndef is_valid_sudoku(board: List[List[str]]) -> bool:\n    pass"
  },
  "functionName": "is_valid_sudoku",
  "solutions": [
    {
      "label": "Hash Sets for Rows, Cols, Boxes \u2014 O(1)",
      "approach": "obvious",
      "language": "python",
      "code": "from typing import List\nfrom collections import defaultdict\n\ndef is_valid_sudoku(board: List[List[str]]) -> bool:\n    rows = defaultdict(set)\n    cols = defaultdict(set)\n    boxes = defaultdict(set)\n    for r in range(9):\n        for c in range(9):\n            val = board[r][c]\n            if val == '.':\n                continue\n            box_id = (r // 3, c // 3)\n            if val in rows[r] or val in cols[c] or val in boxes[box_id]:\n                return False\n            rows[r].add(val)\n            cols[c].add(val)\n            boxes[box_id].add(val)\n    return True",
      "timeComplexity": "O(1)",
      "spaceComplexity": "O(1)",
      "explanation": "Use three dictionaries of sets: one for rows, one for columns, one for 3x3 boxes (keyed by (row//3, col//3)). For each non-empty cell, check if the digit already exists in its row, column, or box set. If so, the board is invalid. Since the board is always 9x9, time and space are constant."
    },
    {
      "label": "Bitmask Approach \u2014 O(1)",
      "approach": "optimal",
      "language": "python",
      "code": "from typing import List\n\ndef is_valid_sudoku(board: List[List[str]]) -> bool:\n    rows = [0] * 9\n    cols = [0] * 9\n    boxes = [0] * 9\n    for r in range(9):\n        for c in range(9):\n            val = board[r][c]\n            if val == '.':\n                continue\n            bit = 1 << (int(val) - 1)\n            box_id = (r // 3) * 3 + (c // 3)\n            if rows[r] & bit or cols[c] & bit or boxes[box_id] & bit:\n                return False\n            rows[r] |= bit\n            cols[c] |= bit\n            boxes[box_id] |= bit\n    return True",
      "timeComplexity": "O(1)",
      "spaceComplexity": "O(1)",
      "explanation": "Use integer bitmasks instead of sets for a more efficient representation. Each row, column, and box is a 9-bit integer where bit i represents digit (i+1). Check membership with bitwise AND, update with bitwise OR. Faster in practice due to better cache efficiency and no hash overhead."
    }
  ],
  "hints": [
    "You need to check three constraints: rows, columns, and 3x3 boxes. Use a separate set for each.",
    "The box index for cell (r, c) is (r // 3) * 3 + (c // 3)."
  ],
  "lcEquivalent": "36. Valid Sudoku"
}